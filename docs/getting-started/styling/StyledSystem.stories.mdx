import { Meta } from "@storybook/addon-docs";
import { Preview, Table } from "@stories/components";
import { Box } from "@components/box";
import { ThemeSpecificationTable } from "./ThemeSpecificationTable";

<Meta
    title="Getting Started/Styling/Styled System"
    id="styled-system"
/>

# Styled System

Orbit styled system is a new way to alter the style of a component by declaring style props instead of writing CSS. Inspired by [Styled System](https://styled-system.com/), Orbit's style props are flexible and easy to discover with [TypeScript](https://www.typescriptlang.org/) intellisense.

To help achieve a consistent UI, Orbit [style props](#style-props) are based on scales and values defined in a customizable [theme](#theme).

```jsx
<Div
    fontSize={6}
    fontWeight={3}
    padding={3}
    marginBottom={3}
    color="white"
    borderRadius={3}
    backgroundColor="primary-5">
    Lost in space.
</Div>
```

## Style props

An Orbit style property is a mapping of a [CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Properties_Reference) to a component property. Orbit styled system let you set style values for CSS properties like [font-size](https://developer.mozilla.org/en-US/docs/Web/CSS/font-size), [margin](https://developer.mozilla.org/en-US/docs/Web/CSS/margin), [padding](https://developer.mozilla.org/en-US/docs/Web/CSS/padding), [width](https://developer.mozilla.org/en-US/docs/Web/CSS/width), and many more which we deem appropriate for ShareGate applications. Shorthands like `border` and `paddingX` are also provided to helps you save keystrokes. An exhaustive list of all the supported props is available in the [props reference](?path=/story/props-reference--page) page.

All style props and style values are discovererable with TypeScript intellisense. Style values intellisense will provide suggestions matching the values provided by the [theme](#theme) as well as the native CSS values of the property. You won't have to guess anymore or open an external documentation to choose a value.

<Preview>
    <Div width={18} backgroundColor="sunray-2" padding={4} borderRadius={2}>
        <Paragraph fontSize={4}>Lost in space.</Paragraph>
    </Div>
</Preview>

## Responsive style

Orbit [style props](#style-props) also supports responsive breakpoints. These breakpoints are documented below and behaves like their CSS media query counterparts.

<Table
    columns={[
        { title: "Size", headerStyle: { width: "75px" }, rowClassName: "code" },
        { title: "Media query", headerStyle: { width: "200px" }, rowClassName: "code" }
    ]}
    rows={[
        ["xs", "min-width: 640px"],
        ["sm", "min-width: 768px"],
        ["md", "min-width: 1024px"],
        ["lg", "min-width: 1280px"],
        ["xl", "min-width: 1536px"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

By passing an object to any style props, you can specify which style will be applied at different breakpoints. These rules are on a `min-width` basis meaning that a sm value will apply from `768px` and up until another higher breakpoint matches.

<Preview>
    <Div backgroundColor={{ base: "botanic-2", xs: "marine-2", sm: "beetle-2", md: "primary-2", lg: "cloud-2", xl: "sunray-2" }} width={18} padding={4}>
        <Paragraph fontSize={4}>Lost in space.</Paragraph>
    </Div>
</Preview>

Not all breakpoints needs to be set explicitly. In the following example, `base` and `lg` are explicitly set breakpoints. When match, the `xl` breakpoint will implicitly takes the value set by `lg` breakpoints since it is wider than `lg`. Everything below `lg` inherits the `base` color.

<Preview>
    <Div backgroundColor={{ base: "botanic-2", lg: "sunray-2" }} width={18} padding={4}>
        <Paragraph fontSize={4}>Lost in space.</Paragraph>
    </Div>
</Preview>

### Pseudo state

The following pseudo states are supported by some styled props and behaves like their pseudo CSS counterparts.

<Table
    columns={[
        { title: "Suffix", headerStyle: { width: "100px" } },
        { title: "Pseudo state", headerStyle: { width: "250px" } } ]}
    rows={[
        ["Active", ":active"],
        ["Hover", ":hover"],
        ["Focus", ":focus"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

<Preview>
    <Div backgroundColorHover="botanic-2" backgroundColor="sunray-2" padding={4} width={18}  borderRadius={2}>
        <Paragraph fontSize={4}>Lost in space.</Paragraph>
    </Div>
</Preview>

Not all style props supports pseudo state. Find out which props support pseudo state in the [props reference](?path=/story/props-reference--page) page.

## HTML elements

You might wonder how will you use Orbit style props on your HTML elements?

Orbit provides a set of HTML element components already setup with Orbit styled system. You should always prefer these components to native HTML elements.

[`<A>`](?path=/docs/html-anchor--example), [`<Address>`](?path=/docs/html-address--example), [`<Article>`](?path=/docs/html-article--page), [`<Aside>`](?path=/docs/html-aside--page), [`<Button>`](?path=/docs/html-button--example), [`<Div>`](?path=/docs/html-div--example), [`<Footer>`](?path=/docs/html-footer--page), [`<Header>`](?path=/docs/html-header--page), [`<Img>`](?path=/docs/html-img--example), [`<Input>`](?path=/docs/html-input--example), [`<List>`](?path=/docs/html-list--example), [`<Main>`](?path=/docs/html-main--page), [`<Nav>`](?path=/docs/html-nav--page), [`<Section>`](?path=/docs/html-section--page), [`<Span>`](?path=/docs/html-span--example), [`<Table>`](?path=/docs/html-table--example)

For text elements, when applicable, prefer a [`<Text>`](?path=/docs/text--size) or [`<Paragraph`](?path=/docs/paragraph--size) component.

## Layout containers

To make it easier for you, Orbit provides specialized components for [Grid](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Grids) and [Flex](https://developer.mozilla.org/en-US/docs/Glossary/Flex_Container) layout containers.

When applicable, always prefer using a [`<Grid>`](?path=/docs/grid--areas) or [`<Flex>`](?path=/docs/flex--horizontal) component over a [`<Div>`](?path=/docs/html-div--example) component.

```jsx
<Grid templateColumns="1fr 1fr" gap={2} height={10}>
    <Div backgroundColor="primary-5" />
    <Div backgroundColor="beetle-5" />
    <Div backgroundColor="botanic-5" />
    <Div backgroundColor="cloud-5" />
</Grid>
```

## Theme

Instead of harcoding the foundation values in Orbit like we did in earlier versions, the Orbit styled system is now powered by the values of a theme object provided by the application.

A theme object is a combinaison of design values and design scales. A design scale can be for [typography](?path=/story/typography--page), [spacing](path=/story/spacing--page), [sizing](?path=/story/sizing--page) or even [colors](?path=/story/colors--page). Some scales are defined in Orbit as arrays for ordinal values like `space` or as plain object for named values like `colors`. Some like `fontSizes` are even a mix of both.

### Specification

The Orbit theme object specification have been inspired by [Styled System Theme Specifications](https://styled-system.com/theme-specification) which is inspired by [System UI Theme Specification](https://system-ui.com/theme/).

An Orbit theme object is currently composed of the following *8 keys*.

<ThemeSpecificationTable
    rows={[
        ["space", "margin, margin-top, margin-bottom, margin-right, margin-left, padding, padding-left, padding-right, padding-bottom, gap, column-gap, row-gap", "spacing-scale"],
        ["sizing", "width, height, min-width, max-width, min-height, max-height, grid-auto-columns, grid-auto-rows", "sizing-scale"],
        ["boxShadows", "box-shadow", "box-shadow-scale"],
        ["fontSizes", "font-size", "1..9 / alias"],
        ["colors", "color, background-color, border-color", "color-scale"],
        ["fontWeights", "font-weights", "1..3"],
        ["lineHeights", "line-heights", "1..6"],
        ["borderRadii", "border-radius", "1..4"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

When rendered with the `createThemeVars` function, the following CSS variables will be created from the theme object values.

<Table
    columns={[
        { title: "Theme key", headerStyle: { width: "150px" }, rowClassName: "code" },
        { title: "CSS variables", headerStyle: { width: "200px" }, rowClassName: "code"}
    ]}
    rows={[
        ["space", "--o-ui-sp-{x}"],
        ["sizing", "--o-ui-sz-{x}"],
        ["boxShadows", "--o-ui-bs-{x}"],
        ["fontSizes", "--o-ui-fs-{x}"],
        ["colors", "--o-ui-{x}"],
        ["fontWeights", "--o-ui-fw-{x}"],
        ["lineHeights", "--o-ui-lh-{x}"],
        ["borderRadii", "--o-ui-br-{x}"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

### Apply a theme

Orbit components and Orbit style props doesn't render any styles until a theme is applied.

To apply a theme:

- Retrieve a theme object
- Render CSS variables from the theme object with `createThemeVars`
- Select a theme to apply with `<ThemeProvider>`

```jsx
import { createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

### Select a theme object

Any object can be used as an Orbit theme object as long as it extend the `OrbitTheme` TypeScript type. A few options are available.

You can define your own theme from scratch.

```jsx
import { OrbitTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

const SpaceTheme: OrbitTheme = {
    name: "space-theme",
    space: [],
    sizing: [],
    fontSizes: {}
    // ...
};

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

You can create a new theme from Orbit defaults. If you choose to do so, you only provide a subset of `OrbitTheme` values. The remaining values will come from Orbit defaults.

```jsx
import { createTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

const SpaceTheme = createTheme({
    name: "space-theme",
    white: "#fff",
    black: "#000",
    primary: [
        "hsla(174, 61%, 94%, 1)",
        "hsla(173, 63%, 85%, 1)",
        "hsla(173, 63%, 75%, 1)",
        "hsla(173, 64%, 65%, 1)",
        "hsla(173, 64%, 50%, 1)",
        "hsla(172, 65%, 48%, 1)",
        "hsla(173, 65%, 46%, 1)",
        "hsla(172, 63%, 45%, 1)",
        "hsla(172, 64%, 43%, 1)",
        "hsla(172, 62%, 41%, 1)"
    ]
    // ...
});

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

You can retrieve a pre-construct theme from Orbit.

```jsx
import { ApricotTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

createThemeVars([ApricotTheme]);

<ThemeProvider theme={ApricotTheme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

### Use a theme object in code

Theme objects are primarily used to boostrap Orbit styled system but they can also be used directly in JavaScript code when a theme value is needed.

If you have access to the theme object, use the object directly.

```jsx
<Div padding={SpaceTheme.spacing[2]}>
    Hello world!
</Div>
```

If you don't have access to the theme object, retrieve a `ThemeAccessor` instance from the `ThemeContext` by using the `useThemeContext` hook.

```jsx
import { useThemeContext } from "sharegate/orbit-ui";

const { themeAccessor } = useThemeContext();

return (
   <Div padding={themeAccessor.getSizing(3)}>
       Hello world!
   </Div>
)
```









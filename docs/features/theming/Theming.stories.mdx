import { Meta } from "@storybook/addon-docs";
import { Table } from "@stories/components";
import { ThemeSpecificationTable } from "./ThemeSpecificationTable";
import { GithubLink } from "@stories/components";

<Meta
    title="Features/Theming"
    id="theming"
/>

# Theming

Orbit styled system is powered by the values of a theme object provided by the application.

A theme object is a combination of design values and design scales. A design scale can be for typography, spacing, sizing or even colors. Some scales are defined in Orbit as arrays for ordinal values like `space` or as plain object for named values like `colors`. Some are even a mix of both, such as `fontSizes`.

### Specifications

The Orbit theme object specification is inspired by [Styled System Theme Specifications](https://styled-system.com/theme-specification) which is inspired by [System UI Theme Specification](https://system-ui.com/theme/).

An Orbit theme object is composed of the following *8 keys*:

<ThemeSpecificationTable
    rows={[
        ["space", "margin, margin-top, margin-bottom, margin-right, margin-left, padding, padding-left, padding-right, padding-bottom, gap, column-gap, row-gap", "spacing-scale"],
        ["sizing", "width, height, min-width, max-width, min-height, max-height, grid-auto-columns, grid-auto-rows", "sizing-scale"],
        ["boxShadows", "box-shadow", "box-shadow-scale"],
        ["fontSizes", "font-size", "font-sizes-scale"],
        ["colors", "color, background-color, border-color", "color-scale"],
        ["fontWeights", "font-weights", "font-weights-scale"],
        ["lineHeights", "line-heights", "line-heights-scale"],
        ["borderRadii", "border-radius", "border-radius-scale"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

When rendered with the `createThemeVars` function, the following CSS variables will be created from the theme object values.

<Table
    columns={[
        { title: "Theme key", headerStyle: { width: "150px" }, rowClassName: "code" },
        { title: "CSS variables", headerStyle: { width: "200px" }, rowClassName: "code"}
    ]}
    rows={[
        ["space", "--o-ui-sp-{x}"],
        ["sizing", "--o-ui-sz-{x}"],
        ["boxShadows", "--o-ui-bs-{x}"],
        ["fontSizes", "--o-ui-fs-{x}"],
        ["colors", "--o-ui-{x}"],
        ["fontWeights", "--o-ui-fw-{x}"],
        ["lineHeights", "--o-ui-lh-{x}"],
        ["borderRadii", "--o-ui-br-{x}"]
    ]}
    style={{
        marginTop: "24px",
        marginBottom: "24px"
    }}
/>

### Apply a theme

Orbit components and Orbit [style props](?path=/docs/style-props--page) doesn't render any styles until a theme is applied.

To apply a theme:

- Retrieve a theme object.
- Render the CSS variables matching the theme object with `createThemeVars`.
- Select a theme to apply with `<ThemeProvider>`.

```jsx
import { createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

### Select a theme object

Any object can be used as an Orbit theme object as long as it extends the <GithubLink path="/packages/components/src/styling/src/theming/orbitTheme.ts">`OrbitTheme`</GithubLink> TypeScript type. A few options are available.

#### Define your own theme from scratch

```jsx
import { OrbitTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

const SpaceTheme: OrbitTheme = {
    name: "space-theme",
    space: [],
    sizing: [],
    fontSizes: {}
    // ...
};

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

#### Create a new theme from Orbit defaults

You only need to provide a subset of <GithubLink path="/packages/components/src/styling/src/theming/orbitTheme.ts">`OrbitTheme`</GithubLink> values. The remaining values will fallback to Orbit defaults.

```jsx
import { createTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

const SpaceTheme = createTheme({
    name: "space-theme",
    white: "#fff",
    black: "#000",
    accent: [
        "hsla(174, 61%, 94%, 1)",
        "hsla(173, 63%, 85%, 1)",
        "hsla(173, 63%, 75%, 1)",
        "hsla(173, 64%, 65%, 1)",
        "hsla(173, 64%, 50%, 1)",
        "hsla(172, 65%, 48%, 1)",
        "hsla(173, 65%, 46%, 1)",
        "hsla(172, 63%, 45%, 1)",
        "hsla(172, 64%, 43%, 1)",
        "hsla(172, 62%, 41%, 1)"
    ]
    // ...
});

createThemeVars([theme]);

<ThemeProvider theme={theme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

#### Retrieve a pre-constructed theme from Orbit

```jsx
import { ShareGateTheme, createThemeVars, ThemeProvider } from "@sharegate/orbit-ui";

createThemeVars([ShareGateTheme]);

<ThemeProvider theme={ShareGateTheme} colorScheme="light">
    <Button>Launch</Button>
</ThemeProvider>
```

### Use a theme object in code

Theme objects are primarily used to boostrap Orbit styled system but they can also be used directly in JavaScript code when you need to fetch a value.

If you have access to the theme object, use the object directly.

```jsx
<Div padding={SpaceTheme.spacing[2]}>
    Hello world!
</Div>
```

If you don't have access to the theme object, retrieve a `ThemeAccessor` instance from the `ThemeContext` by using the `useThemeContext` hook.

```jsx
import { useThemeContext } from "sharegate/orbit-ui";

const { themeAccessor } = useThemeContext();

return (
   <Div padding={themeAccessor.getSizing(3)}>
       Hello world!
   </Div>
)
```

import { Anchor, Meta, Preview, Story } from "@storybook/addon-docs/blocks";
import { ControlledSearchInput } from "./components";
import { DEFAULT_RESULTS, LAURIE_VALUE } from "./data";
import { GithubLink } from "@components/github-link";
import { INSTALLATION_PAGE } from "@stories/pages";
import { PropsTabs } from "@components/props-tabs";
import { SearchInput, SearchInputController } from "@orbit-ui/react-search-input/src";
import { boolean, number, text, withKnobs } from "@storybook/addon-knobs";
import { logValueChanged } from "./utils";
import { paramsBuilder } from "@utils/params-builder";

<Meta
    title="Components|Search Input/results set"
    parameters={paramsBuilder()
        .width("80%")
        .build()}
/>

<GithubLink filePath="/packages/react-components/components/search-input/src" />

<Anchor storyId="components-search-input-results-set--default-story" />

## Installation

<details style={{ marginBottom: "10px" }}><summary>install the packages</summary>

Install from <a href={INSTALLATION_PAGE}>the React bundle</a> or as a single package:

```bash
npm install @orbit-ui/react-search-input @orbit-ui/css-normalize @orbit-ui/tachyons @orbit-ui/semantic-ui-theme semantic-ui-react lodash styled-jsx
```
</details>

<details><summary>then import what you need</summary>

```javascript
import {
    SearchInput,
    searchInputResult
} from "@orbit-ui/react-search-input" | "@orbit-ui/react-components";
```
</details>

## Props

<PropsTabs
    componentsDefinitions={[
        { displayName: "SearchInput", component: SearchInput }
    ]}
/>

## Usage

### Default

<Preview>
    <Story name="default">
        <SearchInput
            results={DEFAULT_RESULTS}
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>

<Preview>
    <Story
        name="knobs"
        decorators={[withKnobs]}
        parameters={paramsBuilder()
            .excludeFromDocs()
            .build()}
    >
        <SearchInput
            results={DEFAULT_RESULTS}
            defaultValue={text("defaultValue")}
            debounceDelay={number("debounceDelay", SearchInput.defaultProps.debounceDelay)}
            minCharacters={number("minCharacters", SearchInput.defaultProps.minCharacters)}
            noResultsMessage={text("noResultsMessage")}
            placeholder={text("placeholder", SearchInputController.defaultProps.placeholder)}
            disabled={boolean("disabled", false)}
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>

### Selected value

<Preview>
    <Story name="selected value">
        <SearchInput
            results={DEFAULT_RESULTS}
            defaultValue={LAURIE_VALUE}
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>

### Clear on select

<Preview>
    <Story name="clear on select">
        <SearchInput
            results={DEFAULT_RESULTS}
            clearOnSelect
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>

<Story
    name="autofocus"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <SearchInput
        results={DEFAULT_RESULTS}
        autofocus
        clearOnSelect
        onValueChange={logValueChanged}
    />
</Story>

### Disabled

<Preview>
    <Story name="disabled">
        <SearchInput
            results={DEFAULT_RESULTS}
            disabled
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>

<Story
    name="dont close on blur"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
    >
    <SearchInput
        results={DEFAULT_RESULTS}
        closeOnBlur={false}
        closeOnOutsideClick
        onValueChange={logValueChanged}
    />
</Story>

### Controlled

<Preview>
    <Story name="controlled">
        <ControlledSearchInput
            results={DEFAULT_RESULTS}
            value={LAURIE_VALUE}
            onValueChange={logValueChanged}
        />
    </Story>
</Preview>


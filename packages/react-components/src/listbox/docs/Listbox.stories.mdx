import { ArgsTable, Meta, Story } from "@storybook/addon-docs/blocks";
import { ComponentInfo, Preview, Tagline } from "@stories/components";
import { HelpIcon, IconList, LightbulbIcon, NotificationIcon } from "@react-components/icons";
import { Inline } from "@react-components/layout";
import { InnerItem, InnerSection, Item, Section } from "@react-components/placeholders";
import { InnerListbox, InnerListboxOption, InnerListboxSection, Listbox } from "@react-components/listbox";
import { LargeAvatar } from "./Avatar.jsx"
import { Text } from "@react-components/text";
import { Tooltip, TooltipTrigger } from "@react-components/tooltip";

<Meta
    title="Components/Listbox"
    id="listbox"
/>

# Listbox

<Tagline>A listbox presents a list of options and allows a user to select one or more of them</Tagline>

<ComponentInfo
    usage={"import { Listbox, Item, Section, ListboxContext, useListboxContext } from \"@orbit-ui/react-components\""}
    ariaPath="#listbox"
    githubPath="/packages/react-components/src/listbox/src"
/>

## Accessibility

A listbox should have an `aria-label` prop describing the content of the list.

## Usage

### Default

A default listbox.

<Preview>
    <Story name="default">
        <Listbox aria-label="Planets">
            <Item key="earth">Earth</Item>
            <Item key="jupiter">Jupiter</Item>
            <Item key="mars">Mars</Item>
            <Item key="mercury">Mercury</Item>
            <Item key="neptune">Neptune</Item>
            <Item key="saturn">Saturn</Item>
            <Item key="uranus">Uranus</Item>
        </Listbox>
    </Story>
</Preview>

### Selection mode

A listbox support single and multiple selection mode.

<Preview>
    <Story name="selection">
        <Inline gap={10}>
            <Listbox aria-label="Planets">
                <Item key="earth">Earth</Item>
                <Item key="jupiter">Jupiter</Item>
                <Item key="mars">Mars</Item>
                <Item key="mercury">Mercury</Item>
                <Item key="neptune">Neptune</Item>
                <Item key="saturn">Saturn</Item>
                <Item key="uranus">Uranus</Item>
            </Listbox>
            <Listbox selectionMode="multiple" aria-label="Planets">
                <Item key="earth">Earth</Item>
                <Item key="jupiter">Jupiter</Item>
                <Item key="mars">Mars</Item>
                <Item key="mercury">Mercury</Item>
                <Item key="neptune">Neptune</Item>
                <Item key="saturn">Saturn</Item>
                <Item key="uranus">Uranus</Item>
            </Listbox>
        </Inline>
    </Story>
</Preview>

### Section

A listbox items can be group by sections.

<Preview>
    <Story name="section">
        <Listbox aria-label="Planets">
            <Section title="Visited">
                <Item key="earth">Earth</Item>
                <Item key="mars">Mars</Item>
                <Item key="saturn">Saturn</Item>
            </Section>
            <Section title="Not Visited">
                <Item key="jupiter">Jupiter</Item>
                <Item key="mercury">Mercury</Item>
                <Item key="neptune">Neptune</Item>
                <Item key="uranus">Uranus</Item>
            </Section>
        </Listbox>
    </Story>
</Preview>

### Icon

A listbox item can have [icons](?path=/docs/icon-gallery--page).

<Preview>
    <Story name="icon">
        <Listbox aria-label="Planets">
            <Item key="earth">
                <NotificationIcon />
                <Text>Earth</Text>
            </Item>
            <Item key="jupiter">
                <HelpIcon />
                <Text>Jupiter</Text>
            </Item>
            <Item key="mars">
                <LightbulbIcon />
                <Text>Mars</Text>
            </Item>
        </Listbox>
    </Story>
</Preview>

### End icon

A listbox item can have *non standard* end [icons](?path=/docs/icon-gallery--page) can be provided to handle special cases like displaying a list of icons. However, think twice before adding *end* icons, *start* icons should be your go to.

<Preview>
    <Story name="end icon">
        <Listbox aria-label="Planets">
            <Item key="earth">
                <Text>Earth</Text>
                <IconList slot="end-icon">
                    <NotificationIcon />
                    <HelpIcon />
                    <LightbulbIcon />
                </IconList>
            </Item>
            <Item key="jupiter">
                <Text>Jupiter</Text>
                <HelpIcon slot="end-icon" />
            </Item>
            <Item key="mars">
                <Text>Mars</Text>
                <IconList slot="end-icon">
                    <NotificationIcon />
                    <HelpIcon />
                    <LightbulbIcon />
                </IconList>
            </Item>
        </Listbox>
    </Story>
</Preview>

### Description

A listbox item can have a description.

<Preview>
    <Story name="description">
        <Listbox aria-label="Planets">
            <Item key="earth">
                <Text>Earth</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="jupiter">Jupiter</Item>
            <Item key="mars">
                <Text>Mars</Text>
                <Text slot="description">See you in 2026</Text>
            </Item>
            <Item key="mercury">Mercury</Item>
            <Item key="neptune">Neptune</Item>
            <Item key="saturn">Saturn</Item>
            <Item key="uranus">Uranus</Item>
        </Listbox>
    </Story>
</Preview>

### Avatar

A listbox item can have an avatar.

<Preview>
    <Story name="avatar">
        <Listbox aria-label="Planets">
            <Item key="earth">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>ER</span></div></LargeAvatar>
                <Text>Earth</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="jupiter">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>JU</span></div></LargeAvatar>
                <Text>Jupiter</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="mars">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>MA</span></div></LargeAvatar>
                <Text>Mars</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="mercury">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>ME</span></div></LargeAvatar>
                <Text>Mercury</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="neptune">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>NE</span></div></LargeAvatar>
                <Text>Neptune</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="saturn">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>SA</span></div></LargeAvatar>
                <Text>Saturn</Text>
                <Text slot="description">Home sweet home!</Text>
            </Item>
            <Item key="uranus">
                <LargeAvatar slot="avatar"><div className="w7 h7 bg-primary-500 white br-100 flex items-center justify-center"><span>UR</span></div></LargeAvatar>
                <Text>Uranus</Text>
                <Text slot="description">See you in 2026</Text>
            </Item>
        </Listbox>
    </Story>
</Preview>

### Tooltip

A listbox item can have a basic tooltip.

<Preview>
    <Story name="tooltip">
        <Listbox aria-label="Planets">
            <TooltipTrigger>
                <Item key="earth">Earth</Item>
                <Tooltip>Best planet so far!</Tooltip>
            </TooltipTrigger>
            <Item key="jupiter">Jupiter</Item>
            <TooltipTrigger>
                <Item key="mars">Mars</Item>
                <Tooltip>See you in 2025!</Tooltip>
            </TooltipTrigger>
            <Item key="mercury">Mercury</Item>
            <Item key="neptune">Neptune</Item>
            <Item key="saturn">Saturn</Item>
            <Item key="uranus">Uranus</Item>
        </Listbox>
    </Story>
</Preview>

### Disabled item

A listbox item can be disabled.

<Preview>
    <Story name="disabled item">
        <Listbox aria-label="Planets">
            <Item disabled key="earth">Earth</Item>
            <Item key="jupiter">Jupiter</Item>
            <Item key="mars">Mars</Item>
            <Item disabled key="mercury">Mercury</Item>
            <Item key="neptune">Neptune</Item>
            <Item key="saturn">Saturn</Item>
            <Item key="uranus">Uranus</Item>
        </Listbox>
    </Story>
</Preview>

### Fluid

A listbox can take the width of it's container.

<Preview>
    <Story name="fluid">
        <Listbox fluid aria-label="Planets">
            <Item key="earth">Earth</Item>
            <Item key="jupiter">Jupiter</Item>
            <Item key="mars">Mars</Item>
            <Item key="mercury">Mercury</Item>
            <Item key="neptune">Neptune</Item>
            <Item key="saturn">Saturn</Item>
            <Item key="uranus">Uranus</Item>
        </Listbox>
    </Story>
</Preview>

### Array map

A listbox items can be rendered with an array map.

<Preview>
    <Story name="array map">
        <Listbox aria-label="Planets">
            {["Earth", "Jupiter", "Mars", "Mercury", "Neptune", "Saturn", "Uranus"].map(x => (
                <Item key={x.toLowerCase()}>{x}</Item>
            ))}
        </Listbox>
    </Story>
</Preview>

### Listbox context

The previous render props example could also be achieve by using `useListboxContext`.

<Preview filePath="/listbox/docs/ListboxContext" noInline />

### Controlled

The selected key can be handled in controlled mode.

<Preview filePath="/listbox/docs/ControlledListbox" />

## API

### Listbox

<ComponentInfo
    usage={"import { Listbox } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerListbox} />

### Item

<ComponentInfo
    usage={"import { Item } from \"@orbit-ui/react-components\""}
    slots={["icon", "text", "description", "end-icon"]}
    compact
/>

<ArgsTable of={InnerItem} />

### Section

<ComponentInfo
    usage={"import { Section } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerSection} />

### ListboxOption

<ComponentInfo
    usage={"import { ListboxOption } from \"@orbit-ui/react-components\""}
    slots={["icon", "text", "description", "end-icon"]}
    compact
/>

<ArgsTable of={InnerListboxOption} />

### ListboxSection

<ComponentInfo
    usage={"import { ListboxSection } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerListboxSection} />
